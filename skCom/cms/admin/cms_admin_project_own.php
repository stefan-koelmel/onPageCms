<?php // charset:UTF-8class cmsAdmin_project extends cmsAdmin_project_base {    function checkList($dataList,$action) {                if ($_SESSION[userLevel] < 9) return 0;        return 0;        $action = "checkUrl";         echo ("CheckList $action <br />");                        switch ($action) {                    }    }        function emptyListSelect_own() {        $ownSelect = array();        $ownSelect[specialView] = "active";        // $ownSelect["dateRange"] = "2012-06"; // month / nextMonth / week /nextWeek        //$ownSelect["specialView"] = "hidden";        //$ownSelect["region"] = 181;        //$ownSelect["category"] = 3;        return $ownSelect;    }        function emptyListFilter_own() {        $ownFilter = array();                return $ownFilter;    }              function emptyData() {        $saveData = array();//        $saveData[highlight] = 3;//        $saveData[show] = 1;//        list($year,$month,$day) = explode("-", date("Y-m-d"));//       //        $today = mktime(12,0,0,$month,$day,$year);//        $startDay = $today+1*24*60*60;//        // echo ("StartDay = ".date("Y-m-d")." -> ".date("Y-m-d",$startDay)." <br>");//       //        $startDay = date("Y-m-d",$startDay);//  //        $plusMonth = $month + 1;//        $plusYear = $year;//        if ($plusMonth>12) {//            $plusMonth = 1;//            $plusYear++;//        }//        //        if ($month<10) $month = "0".$month;//        else $month = "".$month;//        $monthStr = $year."-".$month;//        //        if ($plusMonth<10) $plusMonth = "0".$plusMonth;//        else $plusMonth = "".$plusMonth;//        $plusMonthStr = $plusYear."-".$plusMonth;//        //        //        $saveData[dateRange] = $monthStr;//        $saveData[fromDate] = $startDay; // $monthStr."-  ";//        $saveData[toDate] = $plusMonthStr."-  ";//        $saveData[time] = "  :00";        return $saveData;    }     function location_showList() {        $showList = array();        $showList["image"] = array("name"=>"Projektbild","width"=>80,"height"=>60,"sort"=>0);//        $showList["fromDate"] = array("name"=>"Von","width"=>60);//        $showList["toDate"] = array("name"=>"Bis","width"=>60);        $showList["name"] = array("name"=>"Name","width"=>180);        $showList["category"] = array("name"=>"Rubrik","width"=>130,"align"=>"left");       // $showList["location"] = array("name"=>"Ort","width"=>130,"align"=>"left");        $showList["show"] = array("name"=>"Zeigen","width"=>50,"align"=>"center","sort"=>0);        // $showList["highlight"] = array("name"=>"Sort","width"=>50,"align"=>"center","sort"=>1);        return $showList;    }    function admin_get_specialFilterList_own() {        $specialList = array();        $specialList[hidden] = array("id"=>"hidden","name"=>"Unsichtbare Projekt");        $specialList[hidden][filter] = array("show"=>0);        $specialList[hidden][sort] = "fromDate";//        $specialList[active] = array("id"=>"active","name"=>"Aktive Projekt");//        $specialList[active][filter] = array("show"=>1,"fromDate"=>"<='".date("Y-m-d")."'","toDate"=>">='".date("Y-m-d")."'");//        $specialList[active][sort] = "fromDate";////        $specialList[comeing] = array("id"=>"coming","name"=>"Kommende Projekt");//        $specialList[comeing][filter] = array("show"=>1,"fromDate"=>">='".date("Y-m-d")."'");//        $specialList[comeing][sort] = "fromDate";//        //        $specialList[startpage] = array("id"=>"startpage","name"=>"Startseite");//        $specialList[startpage][filter] = array("show"=>1,"new"=>1);//        $specialList[startpage][sort] = "fromDate";//        //        //        $specialList[preview] = array("id"=>"preview","name"=>"Vorschau");//        $specialList[preview][filter] = array("show"=>1,"fromDate"=>">='".date("Y-m-d")."'","highlight"=>">=4");//        $specialList[preview][sort] = "fromDate";//////        $specialList[gone] = array("id"=>"gone","name"=>"Vergangen Projekt");//        $specialList[gone][filter] = array("show"=>1,"toDate"=>"<='".date("Y-m-d")."'");//        $specialList[gone][sort] = "toDate";//////        $specialList[noImage] = array("id"=>"noImage","name"=>"Ohne Bild");//        $specialList[noImage][filter] = array("show"=>"-","image"=>"");//        $specialList[noImage][sort] = "dateRange";////        $specialList[noLocation] = array("id"=>"noLocation","name"=>"Ohne Ort");//        $specialList[noLocation][filter] = array("show"=>"-","location"=>0);//        $specialList[noLocation][sort] = "dateRange";////        $specialList[oldCategory] = array("id"=>"noLocation","name"=>"Alte Kategorien");//        $specialList[oldCategory][filter] = array("subCategory"=>"0");//        $specialList[oldCategory][sort] = "category";        return $specialList;    }    function admin_get_filterList_own() {        $filterList = array();//        $filterList[specialView]   = array();//        $filterList[specialView]["name"] = "Spezielle Ansichten";//        $filterList[specialView]["type"] = "specialView";//        $filterList[specialView]["showData"] = array("submit"=>1,"empty"=>"normale Ansicht");//        //$filterList[specialView]["filter"] = array("mainCat"=>180,"show"=>1);//        // $filterList[specialView]["sort"] = "name";//        $filterList[specialView]["dataName"] = "specialView";//        $filterList[specialView][customFilter] = 1;//////        $filterList[dateRange]   = array();//        $filterList[dateRange]["name"] = "Ausgabe";//        $filterList[dateRange]["type"] = "category";//        $filterList[dateRange]["showData"] = array("submit"=>1,"empty"=>"Alle Ausgaben","out"=>"info","idValue"=>"name");//        $filterList[dateRange]["filter"] = array("mainCat"=>140,"show"=>1);//        $filterList[dateRange]["sort"] = "name_up";//        $filterList[dateRange]["dataName"] = "dateRange";//        $filterList[dateRange][customFilter] = 1;////        $filterList[produkt] = 0;        $filterList[category] = array();        $filterList[category]["name"] = "Kategorie";        $filterList[category]["type"] = "category";        $filterList[category]["dataName"] = "category";        $filterList[category]["showData"] = array("submit"=>1,"empty"=>"Alle Kategorien zeigen","notIds"=>array(328=>1));        $filterList[category]["filter"] = array("mainCat"=>1,"show"=>1);        $filterList[category]["sort"] = "name";        $filterList[category][customFilter] = 1;//////        $filterList[location] = array();//        $filterList[location]["name"] = "Ort";//        $filterList[location]["type"] = "location";//        $filterList[location]["dataName"] = "location";//        $filterList[location]["showData"] = array("submit"=>1,"type"=>"autoComplete","empty"=>"Ort wählen");//        $filterList[location]["filter"] = array(); // "show"=>"1");//        $filterList[location]["sort"] = "name";//        $filterList[location][customFilter] = 1;////        $filterList[content] = array();//        $filterList[content]["name"] = "Inhalt";//        $filterList[content]["type"] = "text";//        $filterList[content]["dataName"] = "content";//        $filterList[content]["showData"] = array("submit"=>1,"type"=>"text",);//        $filterList[content]["sort"] = "name";//        $filterList[content][customFilter] = 1;        return $filterList;    }       function edit_show_own($tableName,$specialData) {        $formatStr = "Formatierung: <br><b>Fett</b> = #f# Fett #f#<br><i>Kursiv</i> = #k# kursiv #k#";        $formatStr .= "<br>&sbquo;einfache Anführungszeichen&lsquo; => #a# Text #a#";        $formatStr .= "<br>&bdquo;doppelte Anführungszeichen&ldquo; => #A# Text #A#";                                $editShow = array();        $editShow[id]      = array("name"=>"Projekt Id","show"=>1,"showLevel"=>9,"type"=>"text","width"=>"small");        $editShow[id][readonly] = 1;        $editShow[id][needed] = 0;        $editShow[name]    = array("id"=>"firstFocus","name"=>"Überschrift","show"=>1,"type"=>"text","width"=>"standard");        $editShow[name][needed] = "textContent";        $editShow[name][needError] = "Kein Projektname eingeben";        $editShow[info]    = array("name"=>"kurzer Text","show"=>1,"type"=>"textarea","width"=>"standard","height"=>"single");        $editShow[info][needed] = 0;        $editShow[info][tip] = $formatStr;                $editShow[longInfo]    = array("name"=>"langer Text","show"=>1,"type"=>"textarea","width"=>"standard","height"=>"double");        $editShow[longInfo][needed] = 0;        $editShow[longInfo][tip] = $formatStr;        // Category        $editShow[category] = array("name"=>"Kategorie","show"=>1,"type"=>"toggle","width"=>"standard");        $editShow[category][showData] = array("class"=>"adminProjects_Category","count"=>3,"mode"=>"multi");        $editShow[category][showData][dontShow] = array(328=>1);        $editShow[category][showFilter] = array("mainCat"=>1,"show"=>1);        $editShow[category][showSort] = "name";        $editShow[category][needed] = 1;        $editShow[category][needError] = "Keine Kategorie ausgewählt";        // Kunder        $editShow[customer] = array("name"=>"Kunde","show"=>1,"type"=>"text","width"=>"standard");        $editShow[customer][tip] = "Wählt den Veranstaltungsort aus der Datenbank";        // Auftraggeber        $editShow[dealer] = array("name"=>"Auftraggeber","show"=>1,"type"=>"text","width"=>"standard");        $editShow[dealer][tip] = "Wählt den Veranstaltungsort aus der Datenbank";        // Auftraggeber        $editShow[year] = array("name"=>"Jahr","show"=>1,"type"=>"text","width"=>"standard");        $editShow[year][tip] = "Wählt den Veranstaltungsort aus der Datenbank";                      $editShow[image] = array("name"=>"Projekt-Bild","show"=>1,"type"=>"imageSelectList","width"=>"standard","height"=>80);        $editShow[image][imageUpload] = 1;        $editShow[image][imageFolder] = "/project/";                if ($specialData[id]) $editShow[image][imageFolder] .= $specialData[id]."/";                        $editShow[image][needed] = 0;        $editShow[image][tip] = "Auflösung maximal 1000x1000 Pixel<br>Keine Umlaute oder Sonderzeichen<br>";                $editShow[url]    = array("name"=>"Zusätzliche Webseite","show"=>1,"type"=>"text","width"=>"standard","class"=>"adminProjects_url");        $editShow[url][showData] = array("class"=>"adminProjects_url");        $editShow[url][needed] = 0;        $editShow[url][tip] = "Zusätzliche Webseite zu dem Projekt";                $editShow[highlight] = array("name"=>"Sortierung","show"=>0,"type"=>"checkbox","width"=>"standard");        $editShow[highlight][needed] = 0;                        $editShow[show] = array("name"=>"Anzeigen","show"=>1,"type"=>"checkbox","width"=>"standard");        $editShow[show][needed] = 0;        $editShow[show][tip] = "Projekt sichtbar";                $editShow[sort] = array("name"=>"Priorität","show"=>1,"type"=>"toggle","width"=>"standard");        $editShow[sort][dataSource] = array("0"=>"ganz niedrig","1"=>"niedrig","2"=>"mittel","3"=>"standard","4"=>"hoch","5"=>"ganz hoch");        $editShow[sort][showData] = array("count"=>6,"mode"=>"single","class"=>"highlightSelect");        $editShow[sort][tip] = "Definiert die Reihenfolge der Projekt im Bereich der Rubriken";        $editShow[sort][tip] .= "<br />Bei Priorität 'hoch' erscheint der Projekt wenn Startseite aktiviert ist in den Themenboxen auf der Startseite";        $editShow[sort][tip] .= "<br />Bei Priorität 'ganz hoch' erscheint der Projekt wenn Startseite aktiviert auch in der Fläche neben den Tagestipps auf der Startseite";                                    return $editShow;    }        function cacheRefresh($id,$saveData,$mode) {        if ($_SESSION[showLevel] >= 9) echo ("<h1>cacheRefresh($id,$saveData,$mode)</h1>");                cmsCache_deleteId("ausgabe.php", $id, array("box"));                // Archive        $cachePath = "archive/".$saveData[dateRange]; // ."/";        cmsCache_deleteId($cachePath, $id, array("box"));                                                if ($saveData[link]) {            $linkList = explode("|",$saveData[link]);            for ($i=0;$i<count($linkList);$i++) {                list ($linkType,$linkId) = explode(":",$linkList[$i]);                switch ($linkType) {                    case "date" :                         if (intval($linkId)) {                            cmsCache_deleteId("kalender.php", $linkId, array("short"));                            $dateData = cmsDates_getById($linkId);                            if ($_SESSION[userLevel] >= 9)  echo ("MORE DATES LINKES FOR MAIN DATE '$dateData[link]' ?<br>");                            if ($dateData[link]) {                                $linkList2 = explode("|",$dateData[link]);                                                                for ($k=0;$k<count($linkList2);$k++) {                                    list ($linkType2,$linkId2) = explode(":",$linkList2[$k]);                                    switch ($linkType2) {                                        case "date" :                                             $dateLinkId = explode(",",$linkId2);                                            for ($di=0;$di<count($dateLinkId);$di++) {                                                if ($_SESSION[showLevel] >= 9) echo ("Linked Date for Date $linkId2 -> $dateLinkId[$di]<br>");                                                cmsCache_deleteId("kalender.php", $dateLinkId[$di], array("short"));                                            }                                            break;                                        case "article" :                                             // echo ("Linked Projekt for Date $linkId2 <br>");                                            break;                                    }                                }                            }                                                                                }                }                            }        }                        }                function editButtons_own($buttonList,$saveData) {        // show_array($buttonList);        // $buttonList = array();        if ($saveData[id]) {            $buttonList[save][name] = "Projekt speichern";                        if ($_SESSION[userLevel] >= 9) {                $addData = array();                $addData[type] = "submit";                $addData["class"] = "cmsInputButton cmsSecond";                $addData["value"] = "duplicate";                $addData[name] = "Projekt Duplizieren";                $buttonList[duplicate] = $addData;                // $addData[link] = "ausgabe.php?articleId=".$saveData[id];            }                    } else {            $buttonList[save][name] = "Projekt anlegen";        }                // Zeige Datensatz        if ($saveData[id]) {            $addData = array();            $addData[type] = "link";            $addData["class"] = "cmsLinkButton cmsSecond";            $addData[name] = "Projekt Zeigen";            $addData[link] = "ausgabe.php?articleId=".$saveData[id];            $buttonList[show] = $addData;        }                // new Article        $showNew = 1;        if ($showNew) {            $addData = array();            $addData[type] = "link";            $addData["class"] = "cmsLinkButton cmsSecond";            $addData[name] = "Neuen Projekt anlegen";            $addData[link] = "admin_projects.php?view=new";            $buttonList["new"] = $addData;        }                                return $buttonList;    }                     }?>